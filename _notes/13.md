---
layout: note
title: "задание 13: ip-адреса"
---

## 13.1: перебор единиц в масках

[условие](https://education.yandex.ru/ege/task/0c94deea-3c72-4220-b943-1702bc835a1c)

```python
from ipaddress import ip_network

for n_ones in range(0, 32 + 1):
    mask = '1' * n_ones + '0' * (32 - n_ones)
    bytes_list = []
    for k in range(4):
        byte = mask[8 * k : 8 * (k + 1)]
        bytes_list.append(int(byte, base=2))
    # print(bytes_list)
    mask_dec = '.'.join([str(byte) for byte in bytes_list])
    net_1 = ip_network('10.227.3.113/' + mask_dec, strict=False)
    net_2 = ip_network('10.235.127.7/' + mask_dec, strict=False)
    if net_1 != net_2:
        print(n_ones)
        break
```

без перебора масок:
```python
from ipaddress import ip_network

for n_ones in range(0, 32 + 1):
    net_1 = ip_network('10.227.3.113/' + str(n_ones), strict=False)
    net_2 = ip_network('10.235.127.7/' + str(n_ones), strict=False)
    if net_1 != net_2:
        print(n_ones)
        break
```

## 13.2: количество доступных адресов

[условие](https://education.yandex.ru/ege/task/0c94deea-3c72-4220-b943-1702bc835a1c)

```python
net = "192.168.1.0"
mask = "255.255.255.0"

# В этой подсети уже есть 50 подключенных устройств.
for byte in net.split('.'):
    num = bin(int(byte))[2:]
    print('0' * (8 - len(num)) + num, end="")
print()
for byte in mask.split('.'):
    num = bin(int(byte))[2:]
    print('0' * (8 - len(num)) + num, end="")


'''
11000000101010000000000100000000
11111111111111111111111100000000
8 нулевых бит в маске => 256 устройств в сети (от 0 до 255)
все нули не можем использовать как адрес (адрес сети)
все единицы не можем использовать (широковещательный адрес)
50 устройств УЖЕ ЕСТЬ
+ подключили принтер
256 - 1 - 1 - 50 - 1 = 203
```

## 13.3: перебор ip-адресов в сети

[условие](https://education.yandex.ru/ege/task/7f880fb9-5b2c-4eed-9111-2b82c26da194)

```python
from ipaddress import ip_network

net = ip_network('10.112.0.0/255.248.0.0', strict=False)

count = 0
for ip in net:
    if bin(int(ip))[2:].count('1') % 3 == 0:
        count += 1
print(count)
```

## 13.4: перебор ip-адресов с дополнительными условиями

[условие](https://education.yandex.ru/ege/task/bbe0d9e7-4ac2-4fe6-af90-71f7a69adf30)

```python
from ipaddress import ip_network

net = ip_network('192.168.76.160/255.255.255.240')

count = 0
for ip in net:
    if ip != net.network_address:
        if int(ip) % 2 == 0:
            right_byte = bin(int(str(ip).split('.')[-1]))
            if right_byte.count('1') % 2 == 0:
                print(ip)
                count += 1
print(count)
```

